% Process typing

\newcommand*\RuleTExpr{
  \inferrule[TP-Expr]{
    \HasType[\pbot]
      \Ctx
      \E
      \BUnit
      \EffImpure
  }{
    \ProcHasType
    \Ctx
    {\PExp{\E}}
  }
}

\newcommand*\RuleTPar{
  \inferrule[TP-Par]{
    \ProcHasType{\Ctx[1]}{\Proc[1]} \\
    \ProcHasType{\Ctx[2]}{\Proc[2]}
  }{
    \ProcHasType
    {\CtxExtUnord{\Ctx[1]}{\Ctx[2]}}
    {\PPar{\Proc[1]}{\Proc[2]}}
  }
}

\newcommand*\RuleTRes{
  \inferrule[TP-Res]{
    \ProcHasType
    { \CtxExtUnord\Ctx{\CtxExtUnord{\Ctx[1]}{\Ctx[2]}}
    }
    \Proc  \\
    \S \vdash \Bind[1] \leadsto \Ctx[1] \\
    \SDual\S \vdash \Bind[2] \leadsto \Ctx[2]
  }{
    \ProcHasType
    {\Ctx}
    {\PNew{\Bind[1]}{\Bind[2]}\Proc}
  }
}

\newcommand*\RuleBindEmp{
  \inferrule[B-Emp]{}{
    \SSkip \vdash \BEmp \leadsto \CtxEmpty
  }
}

\newcommand*\RuleBindSeq{
  \inferrule[B-Seq]{
    \S[1] \vdash \Bind[1] \leadsto \Ctx[1] \\
    \S[2] \vdash \Bind[2] \leadsto \Ctx[2]
  }{
    \SSeq{\S[1]}{\S[2]} \vdash \BSeq{\Bind[1]}{\Bind[2]} \leadsto \CtxExt{\Ctx[1]}{\Ctx[2]}
  }
}

\newcommand*\RuleBindPar{
  \inferrule[B-Par]{
    \SSeq{\S[1]}{\SRet} \vdash \Bind[1] \leadsto \Ctx[1] \\
    \SSeq{\SAcq}{\S[2]} \vdash \Bind[2] \leadsto \Ctx[2]
  }{
    \SSeq{\S[1]}{\S[2]} \vdash \BPar{\Bind[1]}{\Bind[2]} \leadsto \CtxExtUnord{\Ctx[1]}{\Ctx[2]}
  }
}

\newcommand*\RuleBindVar{
  \inferrule[B-Var]{}{
    \S \vdash \EVar \leadsto \CtxVar\EVar\S
  }
}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../main"
%%% End:
